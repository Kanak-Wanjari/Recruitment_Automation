<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Post a Job</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="bg-light">

<div class="container mt-5">
  <h2 class="mb-4">Post a Job</h2>
  <form id="jobForm">
    <div class="mb-3">
      <label class="form-label">Job Title</label>
      <input type="text" name="title" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Company Name</label>
      <input type="text" name="company" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Job Description</label>
      <textarea name="description" class="form-control" rows="4" required></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Required Skills (comma separated)</label>
      <input type="text" name="required_skills" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Experience Required (years)</label>
      <input type="number" name="experience" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Location</label>
      <input type="text" name="location" class="form-control" />
    </div>
    <div class="mb-3">
      <label class="form-label">Salary (optional)</label>
      <input type="text" name="salary" class="form-control" />
    </div>
    <div class="mb-3">
      <label class="form-label">Recruiter Email (optional)</label>
      <input type="email" name="recruiter_email" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary">Post Job</button>
  </form>

  <div id="status" class="mt-3"></div>
</div>

<div style="text-align: center; margin-top: 40px;">
  <a href="jobs.html">
    <button style="padding: 12px 20px; background-color: #0070f3; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
      üîç Show Available Jobs
    </button>
  </a>
</div>

<script>
  const WEBHOOK_URL = import.meta.env.N8N_WEBHOOK_URL
  document.getElementById('jobForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());

    const res = await fetch("https://kanak-mi.app.n8n.cloud/webhook/fc6f2a95-8579-49ca-a401-7767ca6882c3", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const statusEl = document.getElementById('status');
    if (res.ok) {
      statusEl.innerHTML = '<div class="alert alert-success">Job posted successfully!</div>';
      e.target.reset();
    } else {
      statusEl.innerHTML = '<div class="alert alert-danger">Something went wrong. Try again!</div>';
    }
  });
</script>

</body>
</html>